title: "Floorplan control"
path: "floorplan"
background: center / cover no-repeat url("/local/ui/bg-6.jpg") fixed
type: "custom:ha-dashboard"
theme: ios-dark-mode
badges: []
usePanel: true
sidebar:
  screenMinWidth: 828
  buttons: []
  stickyCards:
    - type: picture-elements
      image: "/local/ui/clck-background.png"
      elements:
        - type: state-label
          entity: sensor.time
          hold_action:
            action: none
          style:
            color: var(--primary-text-color)
            font-size: 5.41vw
            font-weight: 200
            left: 16%
            letter-spacing: "-0.05vw"
            max-width: 1px
            top: 37.5%
            pointer-events: none
          tap_action:
            action: none
        - type: state-label
          entity: sensor.date_string
          hold_action:
            action: none
          style:
            color: var(--secondary-text-color)
            font-size: 1.3vw
            font-weight: 300
            left: 31.5%
            letter-spacing: "-0.05vw"
            text-align: left
            top: 65%
            width: 30%
            pointer-events: none
          tap_action:
            action: none
  cards:
    - type: custom:stack-in-card
      mode: vertical
      keep:
        border_radius: true
        margin: true
        box_shadow: true
        background: true
      card_mod:
        style: |
          ha-card {
            padding: 0% 1% 0% 1%;
          }
      cards:
        - type: "custom:button-card"
          icon: mdi:home
          name: Dashboard
          template: navbar_button
          tap_action:
            action: navigate
            navigation_path: /dashboard-tablet/dashboard
        - type: "custom:button-card"
          icon: mdi:floor-plan
          name: Floorplan control
          template: navbar_button
          variables:
            link_active: "true"
          tap_action:
            action: navigate
            navigation_path: /dashboard-tablet/floorplan
        - type: "custom:button-card"
          icon: mdi:thermometer
          name: Climate control
          template: navbar_button
          tap_action:
            action: navigate
            navigation_path: /dashboard-tablet/climate
        - type: "custom:button-card"
          icon: mdi:bed
          name: Bedtime & wake-up
          template: navbar_button
          tap_action:
            action: navigate
            navigation_path: /dashboard-tablet/sleep
        # VERTICAL SPACER ELEMENT: ADJUST THE HEIGHT WITH THE "height: xx vh"
        - type: "custom:button-card"
          color_type: blank_card
          styles:
            card:
              - height: 37.5vh
        - type: custom:mushroom-chips-card
          chips:
            - type: entity
              entity: sensor.hall_sensor_temperature
              icon: mdi:home-thermometer
            #- type: entity
            #  entity: sensor.electricity_price_tibber
            #  icon: mdi:lightning-bolt-circle
            - type: entity
              entity: sensor.outdoor_temperature
              icon: mdi:thermometer
          alignment: center
          card_mod:
            style: |
              ha-card {
                --chip-background:: rgba(25, 25, 25, 0.2);
                --primary-text-color: var(--secondary-text-color);
              }
cards:
  - type: "custom:bootstrap-grid-card"
    #container_padding: 10px
    #use_hass_style_gutter: true
    #hass_style_gutter_size: "10px"
    cards:
      - type: row
        cards:
          # HOME/ROOM/DEVICE DATA & CONTROL COLUMN
          - type: col
            class: "col-md-5 col-xxl-4"
            cards:
            - type: conditional
              conditions:
                - condition: state
                  entity: input_text.floorplan_select_state
                  state: "none"
              card:
                  type: custom:stack-in-card
                  mode: vertical
                  cards:
                    - type: custom:mushroom-title-card
                      title: Gullburet
                    - type: horizontal-stack
                      cards:
                        - type: "custom:button-card"
                          icon: mdi:lightbulb-group
                          name: Alle p√•
                          template: light_mode
                          entity: script.all_lights_on
                          tap_action:
                            action: call-service
                            service: script.turn_on
                            data:
                              entity_id: script.all_lights_on
                        - type: "custom:button-card"
                          icon: mdi:lightbulb-group-off-outline
                          name: Alle av
                          entity: script.all_lights_off
                          template: light_mode
                          tap_action:
                            action: call-service
                            service: script.turn_on
                            data:
                              entity_id: script.all_lights_off
                        - type: "custom:button-card"
                          icon: mdi:bed
                          name: Leggetid
                          template: light_mode
                          entity: script.bedtime_lights
                          tap_action:
                            action: call-service
                            service: script.turn_on
                            data:
                              entity_id: script.bedtime_lights
                    - type: custom:mushroom-number-card
                      entity: input_number.apartment_dimmer
                      layout: horizontal
                      name: Dim all lights
                      icon_color: accent
            - type: conditional
              conditions:
                - condition: state
                  entity: input_text.floorplan_select_state
                  state_not: "none"
              card:
                  type: custom:stack-in-card
                  mode: vertical
                  cards:
                    - type: custom:mushroom-title-card
                      title: Ikke Gullburet
          # 3D FLOORPLAN VISUALIZATION COLUMN
          - type: col
            class: "col-md-7 col-xxl-8"
            cards:
            - type: picture-elements
              image: /local/floorplan/base-dark-v3.png
              card_mod:
                style: |
                  ha-card {
                    width: 89%;
                    background-color: transparent;
                  }
              elements:
                # Z-INDEX ORDER:
                # base: 0, 1
                # light-renders: 2 - 9
                # outlines: 10
                # outlines, hidden: 11, 12, 13, 14
                # device icons: 15
                # ###########################################################
                - type: conditional
                  conditions:
                    - entity: input_boolean.floorplan_show_icons
                      state: "on"
                  elements:
                    # BEDROOM PENDANT ICON
                    - type: state-icon
                      entity: light.pendant_bedroom
                      icon: mdi:lightbulb
                      #icon: mdi:ceiling-light
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      style:
                        left: 27%
                        top: 80%
                        z-index: 15
                        '--mdc-icon-size': 25px
                    # OFFICE PENDANTS ICON
                    - type: state-icon
                      entity: light.pendants_office
                      icon: mdi:lightbulb
                      #icon: mdi:ceiling-light-multiple
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      style:
                        left: 54%
                        top: 80%
                        z-index: 15
                        '--mdc-icon-size': 25px
                    # GUEST PENDANT ICON
                    - type: state-icon
                      entity: light.pendant_guest
                      icon: mdi:lightbulb
                      #icon: mdi:ceiling-light
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      style:
                        left: 75%
                        top: 80%
                        z-index: 15
                        '--mdc-icon-size': 25px
                    # ENTRY DOWNLIGHTS ICON
                    - type: state-icon
                      entity: light.downlights_entry
                      icon: mdi:lightbulb
                      #icon: mdi:light-recessed
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      style:
                        left: 71.75%
                        top: 64%
                        z-index: 15
                        '--mdc-icon-size': 25px
                    # TOILET DOWNLIGHT ICON
                    - type: state-icon
                      entity: light.downlight_toilet
                      icon: mdi:lightbulb
                      #icon: mdi:light-recessed
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      style:
                        left: 85%
                        top: 52%
                        z-index: 15
                        '--mdc-icon-size': 25px
                    # BATH DOWNLIGHTS ICON
                    - type: state-icon
                      entity: light.downlights_bath
                      icon: mdi:lightbulb
                      #icon: mdi:light-recessed
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      style:
                        left: 63%
                        top: 46%
                        z-index: 15
                        '--mdc-icon-size': 25px
                    # BATH LIGHTSTRIP ICON
                    - type: state-icon
                      entity: light.lightstrip_bath
                      icon: mdi:lightbulb
                      #icon: mdi:led-strip-variant
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      style:
                        left: 87%
                        top: 41%
                        z-index: 15
                        '--mdc-icon-size': 25px
                    # LIVING ROOM SPOTTRACK ICON
                    - type: state-icon
                      entity: light.spottrack4_living
                      icon: mdi:lightbulb
                      #icon: mdi:track-light
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      style:
                        left: 41%
                        top: 44%
                        z-index: 15
                        '--mdc-icon-size': 25px
                    # LIVING ROOM DOWNLIGHTS ICON
                    - type: state-icon
                      entity: light.downlights_living
                      icon: mdi:lightbulb
                      #icon: mdi:light-recessed
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      style:
                        left: 16%
                        top: 44%
                        z-index: 15
                        '--mdc-icon-size': 25px
                    # LIVING ROOM MUSHROOM LAMP
                    - type: state-icon
                      entity: switch.lamp_mushroom_living
                      icon: mdi:lightbulb
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      style:
                        left: 50%
                        top: 50%
                        z-index: 15
                        '--mdc-icon-size': 25px
                    # LIVING ROOM MOOD BALL
                    - type: state-icon
                      entity: light.mood_ball
                      icon: mdi:lightbulb
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      style:
                        left: 50%
                        top: 41%
                        z-index: 15
                        '--mdc-icon-size': 25px
                    # LIVING ROOM GLOBE LAMP
                    - type: state-icon
                      entity: switch.lamp_globe_living
                      icon: mdi:lightbulb
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      style:
                        left: 18%
                        top: 67%
                        z-index: 15
                        '--mdc-icon-size': 25px
                    # DINING PENDANTS ICON
                    - type: state-icon
                      entity: light.pendants_living
                      icon: mdi:lightbulb
                      #icon: mdi:globe-light
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      style:
                        left: 34.5%
                        top: 20%
                        z-index: 15
                        '--mdc-icon-size': 25px
                    # KITCHEN PENDANTS ICON
                    - type: state-icon
                      entity: light.pendants_kitchen
                      icon: mdi:lightbulb
                      #icon: mdi:ceiling-light-multiple
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      style:
                        left: 61%
                        top: 20%
                        z-index: 15
                        '--mdc-icon-size': 25px
                    # KITCHEN SPOTTRACK ICON
                    - type: state-icon
                      entity: light.spottrack6_kitchen
                      icon: mdi:lightbulb
                      #icon: mdi:track-light
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      style:
                        left: 74%
                        top: 20%
                        z-index: 15
                        '--mdc-icon-size': 25px
                    # KITCHEN LIGHTSTRIP UNDER-SHELF
                    - type: state-icon
                      entity: light.lightstrip_undershelf_kitchen
                      icon: mdi:lightbulb
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      style:
                        left: 85%
                        top: 32%
                        z-index: 15
                        '--mdc-icon-size': 25px
                    # STORAGE ROOM CEILING LIGHT
                    # TODO: Countdown with label when on - 
                    # It is hard to make a timer-sensor that updates every second in HA :/
                    - type: conditional
                      conditions:
                        - entity: light.ceiling_light_storage
                          state: "off"
                      elements:
                        - type: state-icon
                          entity: light.ceiling_light_storage
                          icon: mdi:lightbulb
                          tap_action:
                            action: call-service
                            service: script.turn_on
                            data:
                              entity_id: script.storage_light_on_manual
                          hold_action:
                            action: more-info
                          style:
                            left: 80%
                            top: 4%
                            z-index: 15
                            '--mdc-icon-size': 25px
                    - type: conditional
                      conditions:
                        - entity: light.ceiling_light_storage
                          state: "on"
                      elements:
                        - type: state-label
                          entity: sensor.storage_room_light_time_remaining
                          tap_action:
                            action: none
                          hold_action:
                            action: none
                          style:
                            left: 80%
                            top: 4%
                            z-index: 15
                            color: white
                    # VERANDA WALL LANTERN
                    - type: state-icon
                      entity: light.wall_lantern_veranda
                      icon: mdi:lightbulb
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      style:
                        left: 53.5%
                        top: 6.5%
                        z-index: 15
                        '--mdc-icon-size': 25px
                    # VERANDA STRING LIGHTS
                    # De-clutter floorplan, remove devices that are
                    # controlled automatically, such as this one
                    #- type: state-icon
                    #  entity: switch.plug_switch_string_lights_bryter
                    #  icon: mdi:lightbulb
                    #  tap_action:
                # Adds a clickable icon and hidden layers on sides to un-select a room
                - type: conditional
                  conditions:
                    - entity: input_text.floorplan_select_state
                      state_not: "none"
                  elements:
                    - type: icon
                      icon: mdi:window-close
                      tap_action:
                        action: call-service
                        service: script.deselect_floorplan_room
                      hold_action:
                        action: none
                      style:
                        left: 94%
                        top: 2%
                        z-index: 15
                        color: '#03A9F4'
                        '--mdc-icon-size': 30px
                    - type: icon
                      icon: mdi:selection
                      tap_action:
                        action: call-service
                        service: script.deselect_floorplan_room
                      style:
                        left: 0%
                        top: 46%
                        opacity: 0
                        z-index: 11
                        color: white
                        '--mdc-icon-size': 100px
                        transform: 'scaleX(1) scaleY(8.3)'
                    - type: icon
                      icon: mdi:selection
                      tap_action:
                        action: call-service
                        service: script.deselect_floorplan_room
                      style:
                        left: 88%
                        top: 42%
                        opacity: 0
                        z-index: 11
                        color: white
                        '--mdc-icon-size': 135px
                        transform: 'scaleX(1) scaleY(6.3)'
                - type: conditional
                  conditions:
                    - entity: input_boolean.floorplan_show_icons
                      state: "on"
                  elements:
                    - type: state-icon
                      entity: input_boolean.floorplan_show_icons
                      icon: mdi:eye
                      tap_action:
                        action: toggle
                      hold_action:
                        action: none
                      style:
                        left: 5%
                        top: 2%
                        z-index: 15
                        color: white
                        '--mdc-icon-size': 30px
                        '--state-active-color': white
                - type: conditional
                  conditions:
                    - entity: input_boolean.floorplan_show_icons
                      state: "off"
                  elements:
                    - type: state-icon
                      entity: input_boolean.floorplan_show_icons
                      icon: mdi:eye-off
                      tap_action:
                        action: toggle
                      hold_action:
                        action: none
                      style:
                        left: 5%
                        top: 2%
                        z-index: 15
                        '--mdc-icon-size': 30px
                # ###########################################################
                # OUTLINES HIDDEN SELECT ICONS
                # Veranda
                - type: icon
                  icon: mdi:selection
                  tap_action:
                    action: call-service
                    service: script.select_floorplan_room
                    data:
                      room_name: veranda
                  style:
                    left: 34.5%
                    top: 0%
                    opacity: 0
                    z-index: 13
                    color: grey
                    '--mdc-icon-size': 65px
                    transform: 'scaleX(4.5) scaleY(1)'
                # Storage
                - type: icon
                  icon: mdi:selection
                  tap_action:
                    action: call-service
                    service: script.select_floorplan_room
                    data:
                      room_name: storage
                  style:
                    left: 73.2%
                    top: 0%
                    opacity: 0
                    z-index: 14
                    color: purple
                    '--mdc-icon-size': 66px
                    transform: 'scaleX(1.3) scaleY(1)'
                # Kitchen
                - type: icon
                  icon: mdi:selection
                  tap_action:
                    action: call-service
                    service: script.select_floorplan_room
                    data:
                      room_name: kitchen
                  style:
                    left: 53.3%
                    top: 10%
                    opacity: 0
                    z-index: 13
                    color: green
                    '--mdc-icon-size': 177px
                    transform: 'scaleX(1) scaleY(1.2)'
                # Living room
                - type: icon
                  icon: mdi:selection
                  tap_action:
                    action: call-service
                    service: script.select_floorplan_room
                    data:
                      room_name: living
                  style:
                    left: 5%
                    top: 24%
                    opacity: 0
                    z-index: 12
                    color: red
                    '--mdc-icon-size': 250px
                    transform: 'scaleX(0.9) scaleY(2.03)'
                # Bath
                - type: icon
                  icon: mdi:selection
                  tap_action:
                    action: call-service
                    service: script.select_floorplan_room
                    data:
                      room_name: bath
                  style:
                    left: 53%
                    top: 34%
                    opacity: 0
                    z-index: 13
                    color: yellow
                    '--mdc-icon-size': 185px
                    transform: 'scaleX(1) scaleY(1)'
                # Toilet
                - type: icon
                  icon: mdi:selection
                  tap_action:
                    action: call-service
                    service: script.select_floorplan_room
                    data:
                      room_name: toilet
                  style:
                    left: 76.5%
                    top: 46.75%
                    opacity: 0
                    z-index: 14
                    color: teal
                    '--mdc-icon-size': 80px
                    transform: 'scaleX(1) scaleY(1.15)'
                # Entry
                - type: icon
                  icon: mdi:selection
                  tap_action:
                    action: call-service
                    service: script.select_floorplan_room
                    data:
                      room_name: entry
                  style:
                    left: 61%
                    top: 57%
                    opacity: 0
                    z-index: 13
                    color: pink
                    '--mdc-icon-size': 120px
                    transform: 'scaleX(1.6) scaleY(1)'
                # Bedroom
                - type: icon
                  icon: mdi:selection
                  tap_action:
                    action: call-service
                    service: script.select_floorplan_room
                    data:
                      room_name: bedroom
                  style:
                    left: 2%
                    top: 73%
                    opacity: 0
                    z-index: 13
                    color: blue
                    '--mdc-icon-size': 209px
                    transform: 'scaleX(0.85) scaleY(1.1)'
                # Office
                - type: icon
                  icon: mdi:selection
                  tap_action:
                    action: call-service
                    service: script.select_floorplan_room
                    data:
                      room_name: office
                  style:
                    left: 37%
                    top: 75%
                    opacity: 0
                    z-index: 14
                    color: violet
                    '--mdc-icon-size': 170px
                    transform: 'scaleX(0.75) scaleY(1.3)'
                # Guest
                - type: icon
                  icon: mdi:selection
                  tap_action:
                    action: call-service
                    service: script.select_floorplan_room
                    data:
                      room_name: guest
                  style:
                    left: 61%
                    top: 74%
                    opacity: 0
                    z-index: 12
                    color: orange
                    '--mdc-icon-size': 190px
                    transform: 'scaleX(0.7) scaleY(1.2)'
                # ###########################################################
                # OUTLINES HANDLER
                # Marks the outline of the room in floorplan_select_state
                - type: image
                  entity: input_text.floorplan_select_state
                  state_image:
                    "bath": "/local/floorplan/outline-bath.png"
                    "bedroom": "/local/floorplan/outline-bedroom.png"
                    "commons": "/local/floorplan/outline-commons.png"
                    "entry": "/local/floorplan/outline-entry.png"
                    "guest": "/local/floorplan/outline-guest.png"
                    "kitchen": "/local/floorplan/outline-kitchen.png"
                    "living": "/local/floorplan/outline-living.png"
                    "office": "/local/floorplan/outline-office.png"
                    "storage": "/local/floorplan/outline-storage.png"
                    "toilet": "/local/floorplan/outline-toilet.png"
                    "veranda": "/local/floorplan/outline-veranda.png"
                    "none": "/local/floorplan/base-empty.png"
                  style:
                    left: 50%
                    top: 50%
                    width: 100%
                    z-index: 10
                  tap_action:
                    action: none
                  hold_action:
                    action: none
                  double_tap_action:
                    action: none
                # -----------------------------------------------------------
                # LIGHT LAYERS
                # Bedroom
                - type: image
                  entity: sensor.pendant_bedroom_dim
                  image: "/local/floorplan/bedroom-v2.png"
                  style:
                    left: 50%
                    top: 50%
                    width: 100%
                    z-index: 2
                  state_filter:
                    "0": opacity(0%)
                    "5": opacity(20%)
                    "10": opacity(28%)
                    "15": opacity(36%)
                    "20": opacity(44%)
                    "25": opacity(52%)
                    "30": opacity(60%)
                    "40": opacity(68%)
                    "50": opacity(75%)
                    "60": opacity(80%)
                    "70": opacity(85%)
                    "80": opacity(90%)
                    "90": opacity(95%)
                    "100": opacity(100%)
                # Office
                - type: image
                  entity: sensor.pendants_office_dim
                  image: "/local/floorplan/office-v2.png"
                  style:
                    left: 50%
                    top: 50%
                    width: 100%
                    z-index: 2
                  state_filter:
                    "0": opacity(0%)
                    "5": opacity(20%)
                    "10": opacity(28%)
                    "15": opacity(36%)
                    "20": opacity(44%)
                    "25": opacity(52%)
                    "30": opacity(60%)
                    "40": opacity(68%)
                    "50": opacity(75%)
                    "60": opacity(80%)
                    "70": opacity(85%)
                    "80": opacity(90%)
                    "90": opacity(95%)
                    "100": opacity(100%)
                # Guest
                - type: image
                  entity: sensor.pendant_guest_dim
                  image: "/local/floorplan/guest-v2.png"
                  style:
                    left: 50%
                    top: 50%
                    width: 100%
                    z-index: 2
                  state_filter:
                    "0": opacity(0%)
                    "5": opacity(20%)
                    "10": opacity(28%)
                    "15": opacity(36%)
                    "20": opacity(44%)
                    "25": opacity(52%)
                    "30": opacity(60%)
                    "40": opacity(68%)
                    "50": opacity(75%)
                    "60": opacity(80%)
                    "70": opacity(85%)
                    "80": opacity(90%)
                    "90": opacity(95%)
                    "100": opacity(100%)
                # Toilet
                - type: image
                  entity: sensor.downlight_toilet_dim
                  image: "/local/floorplan/toilet-v2.png"
                  style:
                    left: 50%
                    top: 50%
                    width: 100%
                    z-index: 2
                  state_filter:
                    "0": opacity(0%)
                    "5": opacity(20%)
                    "10": opacity(28%)
                    "15": opacity(36%)
                    "20": opacity(44%)
                    "25": opacity(52%)
                    "30": opacity(60%)
                    "40": opacity(68%)
                    "50": opacity(75%)
                    "60": opacity(80%)
                    "70": opacity(85%)
                    "80": opacity(90%)
                    "90": opacity(95%)
                    "100": opacity(100%)
                # Bathroom downlights
                - type: image
                  entity: sensor.downlights_bath_dim
                  image: "/local/floorplan/bath-downlights-v2.png"
                  style:
                    left: 50%
                    top: 50%
                    width: 100%
                    z-index: 3
                    mix-blend-mode: lighten
                  state_filter:
                    "0": opacity(0%)
                    "5": opacity(20%)
                    "10": opacity(28%)
                    "15": opacity(36%)
                    "20": opacity(44%)
                    "25": opacity(52%)
                    "30": opacity(60%)
                    "40": opacity(68%)
                    "50": opacity(75%)
                    "60": opacity(80%)
                    "70": opacity(85%)
                    "80": opacity(90%)
                    "90": opacity(95%)
                    "100": opacity(100%)
                # Bathroom lightstrip
                - type: image
                  entity: sensor.lightstrip_bath_dim
                  image: "/local/floorplan/bath-lightstrip-v2.png"
                  style:
                    left: 50%
                    top: 50%
                    width: 100%
                    z-index: 2
                  state_filter:
                    "0": opacity(0%)
                    "5": opacity(20%)
                    "10": opacity(28%)
                    "15": opacity(36%)
                    "20": opacity(44%)
                    "25": opacity(52%)
                    "30": opacity(60%)
                    "40": opacity(68%)
                    "50": opacity(75%)
                    "60": opacity(80%)
                    "70": opacity(85%)
                    "80": opacity(90%)
                    "90": opacity(95%)
                    "100": opacity(100%)
                # Entry 
                - type: image
                  entity: sensor.downlights_entry_dim
                  image: "/local/floorplan/common-entry-v2.png"
                  style:
                    left: 50%
                    top: 50%
                    width: 100%
                    z-index: 2
                  state_filter:
                    "0": opacity(0%)
                    "5": opacity(20%)
                    "10": opacity(28%)
                    "15": opacity(36%)
                    "20": opacity(44%)
                    "25": opacity(52%)
                    "30": opacity(60%)
                    "40": opacity(68%)
                    "50": opacity(75%)
                    "60": opacity(80%)
                    "70": opacity(85%)
                    "80": opacity(90%)
                    "90": opacity(95%)
                    "100": opacity(100%)
                # Living room spottrack
                - type: image
                  entity: sensor.spottrack_living_dim
                  image: "/local/floorplan/common-4track-v2.png"
                  style:
                    left: 50%
                    top: 50%
                    width: 100%
                    z-index: 3
                    mix-blend-mode: lighten
                  state_filter:
                    "0": opacity(0%)
                    "5": opacity(20%)
                    "10": opacity(28%)
                    "15": opacity(36%)
                    "20": opacity(44%)
                    "25": opacity(52%)
                    "30": opacity(60%)
                    "40": opacity(68%)
                    "50": opacity(75%)
                    "60": opacity(80%)
                    "70": opacity(85%)
                    "80": opacity(90%)
                    "90": opacity(95%)
                    "100": opacity(100%)
                # Living room downlights
                - type: image
                  entity: sensor.downlights_living_dim
                  image: "/local/floorplan/common-downlights-v2.png"
                  style:
                    left: 50%
                    top: 50%
                    width: 100%
                    z-index: 4
                    mix-blend-mode: lighten
                  state_filter:
                    "0": opacity(0%)
                    "5": opacity(20%)
                    "10": opacity(28%)
                    "15": opacity(36%)
                    "20": opacity(44%)
                    "25": opacity(52%)
                    "30": opacity(60%)
                    "40": opacity(68%)
                    "50": opacity(75%)
                    "60": opacity(80%)
                    "70": opacity(85%)
                    "80": opacity(90%)
                    "90": opacity(95%)
                    "100": opacity(100%)
                # Dining pendants
                - type: image
                  entity: sensor.pendants_dining_dim
                  image: "/local/floorplan/common-dining-v2.png"
                  style:
                    left: 50%
                    top: 50%
                    width: 100%
                    z-index: 5
                    mix-blend-mode: lighten
                  state_filter:
                    "0": opacity(0%)
                    "5": opacity(20%)
                    "10": opacity(28%)
                    "15": opacity(36%)
                    "20": opacity(44%)
                    "25": opacity(52%)
                    "30": opacity(60%)
                    "40": opacity(68%)
                    "50": opacity(75%)
                    "60": opacity(80%)
                    "70": opacity(85%)
                    "80": opacity(90%)
                    "90": opacity(95%)
                    "100": opacity(100%)
                # Kitchen pendants
                - type: image
                  entity: sensor.pendants_kitchen_dim
                  image: "/local/floorplan/common-flowerpots-v2.png"
                  style:
                    left: 50%
                    top: 50%
                    width: 100%
                    z-index: 6
                    mix-blend-mode: lighten
                  state_filter:
                    "0": opacity(0%)
                    "5": opacity(20%)
                    "10": opacity(28%)
                    "15": opacity(36%)
                    "20": opacity(44%)
                    "25": opacity(52%)
                    "30": opacity(60%)
                    "40": opacity(68%)
                    "50": opacity(75%)
                    "60": opacity(80%)
                    "70": opacity(85%)
                    "80": opacity(90%)
                    "90": opacity(95%)
                    "100": opacity(100%)
                # Kitchen spottrack
                - type: image
                  entity: sensor.spottrack_kitchen_dim
                  image: "/local/floorplan/common-6track-v2.png"
                  style:
                    left: 50%
                    top: 50%
                    width: 100%
                    z-index: 7
                    mix-blend-mode: lighten
                  state_filter:
                    "0": opacity(0%)
                    "5": opacity(20%)
                    "10": opacity(28%)
                    "15": opacity(36%)
                    "20": opacity(44%)
                    "25": opacity(52%)
                    "30": opacity(60%)
                    "40": opacity(68%)
                    "50": opacity(75%)
                    "60": opacity(80%)
                    "70": opacity(85%)
                    "80": opacity(90%)
                    "90": opacity(95%)
                    "100": opacity(100%)
                # Kitchen lightstrip
                - type: image
                  entity: sensor.lightstrip_undershelf_kitchen_dim
                  image: "/local/floorplan/common-shelfstrip.png"
                  style:
                    left: 50%
                    top: 50%
                    width: 100%
                    z-index: 8
                    mix-blend-mode: lighten
                  state_filter:
                    "0": opacity(0%)
                    "5": opacity(20%)
                    "10": opacity(28%)
                    "15": opacity(36%)
                    "20": opacity(44%)
                    "25": opacity(52%)
                    "30": opacity(60%)
                    "40": opacity(68%)
                    "50": opacity(75%)
                    "60": opacity(80%)
                    "70": opacity(85%)
                    "80": opacity(90%)
                    "90": opacity(95%)
                    "100": opacity(100%)
                # Storage room
                - type: image
                  entity: sensor.ceiling_light_storage_dim
                  image: "/local/floorplan/storage.png"
                  style:
                    left: 50%
                    top: 50%
                    width: 100%
                    z-index: 2
                    mix-blend-mode: lighten
                  state_filter:
                    "0": opacity(0%)
                    "5": opacity(20%)
                    "10": opacity(28%)
                    "15": opacity(36%)
                    "20": opacity(44%)
                    "25": opacity(52%)
                    "30": opacity(60%)
                    "40": opacity(68%)
                    "50": opacity(75%)
                    "60": opacity(80%)
                    "70": opacity(85%)
                    "80": opacity(90%)
                    "90": opacity(95%)
                    "100": opacity(100%)
                # Veranda
                - type: image
                  entity: sensor.wall_lantern_veranda_dim
                  image: "/local/floorplan/common-veranda.png"
                  style:
                    left: 50%
                    top: 50%
                    width: 100%
                    z-index: 9
                    mix-blend-mode: lighten
                  state_filter:
                    "0": opacity(0%)
                    "5": opacity(20%)
                    "10": opacity(28%)
                    "15": opacity(36%)
                    "20": opacity(44%)
                    "25": opacity(52%)
                    "30": opacity(60%)
                    "40": opacity(68%)
                    "50": opacity(75%)
                    "60": opacity(80%)
                    "70": opacity(85%)
                    "80": opacity(90%)
                    "90": opacity(95%)
                    "100": opacity(100%)
                  

                      #mix-blend-mode: lighten # Test: hard-light, soft-light, luminosity