title: "Floorplan control"
path: "floorplan"
background: center / cover no-repeat url("/local/ui/homekit-bg-4-cropped.jpg") fixed
type: "custom:ha-dashboard"
theme: ios-dark-mode
badges: []
usePanel: true
sidebar:
  screenMinWidth: 828
  buttons: []
  stickyCards:
    - type: picture-elements
      image: "/local/ui/clck-background.png"
      elements:
        - type: state-label
          entity: sensor.time
          hold_action:
            action: none
          style:
            color: var(--primary-text-color)
            font-size: 5.41vw
            font-weight: 200
            left: 16%
            letter-spacing: "-0.05vw"
            max-width: 1px
            top: 37.5%
            pointer-events: none
          tap_action:
            action: none
        - type: state-label
          entity: sensor.date_string
          hold_action:
            action: none
          style:
            color: var(--secondary-text-color)
            font-size: 1.3vw
            font-weight: 300
            left: 31.5%
            letter-spacing: "-0.05vw"
            text-align: left
            top: 65%
            width: 30%
            pointer-events: none
          tap_action:
            action: none
  cards:
    - type: custom:stack-in-card
      mode: vertical
      keep:
        border_radius: true
        margin: true
        box_shadow: true
        background: true
      card_mod:
        style: |
          ha-card {
            padding: 0% 1% 0% 1%;
          }
      cards:
        - type: "custom:button-card"
          icon: mdi:home
          name: Dashboard
          template: navbar_button
          tap_action:
            action: navigate
            navigation_path: /dashboard-tablet/dashboard
        - type: "custom:button-card"
          icon: mdi:view-dashboard
          name: Floorplan control
          template: navbar_button
          variables:
            link_active: "true"
          tap_action:
            action: navigate
            navigation_path: /dashboard-tablet/floorplan
        - type: "custom:button-card"
          icon: mdi:thermometer
          name: Climate control
          template: navbar_button
          tap_action:
            action: navigate
            navigation_path: /dashboard-tablet/climate
        - type: "custom:button-card"
          icon: mdi:bed
          name: Bedtime & wake-up
          template: navbar_button
          tap_action:
            action: navigate
            navigation_path: /dashboard-tablet/sleep
        # VERTICAL SPACER ELEMENT: ADJUST THE HEIGHT WITH THE "height: xx vh"
        - type: "custom:button-card"
          color_type: blank_card
          styles:
            card:
              - height: 37.5vh
        - type: custom:mushroom-chips-card
          chips:
            - type: entity
              entity: sensor.hall_sensor_temperature
              icon: mdi:home-thermometer
            #- type: entity
            #  entity: sensor.electricity_price_tibber
            #  icon: mdi:lightning-bolt-circle
            - type: entity
              entity: sensor.outdoor_temperature
              icon: mdi:thermometer
          alignment: center
          card_mod:
            style: |
              ha-card {
                --chip-background:: rgba(25, 25, 25, 0.2);
                --primary-text-color: var(--secondary-text-color);
              }
cards:
  - type: "custom:bootstrap-grid-card"
    #container_padding: 10px
    #use_hass_style_gutter: true
    #hass_style_gutter_size: "10px"
    cards:
      - type: row
        cards:
          - type: col
            class: "col-md-5 col-xxl-4"
            cards:
              - type: markdown
                content: "Floor settings will show here"
          - type: col
            class: "col-md-7 col-xxl-8"
            cards:
              - type: picture-elements
                image: /local/floorplan/base-dark-v2.png
                card_mod:
                  style: |
                    ha-card {
                      width: 89%;
                      background-color: transparent;
                    }
                elements:
                  # Z-INDEX HIERARCHY:
                  # base: 0, 1
                  # light-renders: 2 - 9
                  # outlines: 10
                  # outlines-hidden: 11, 12
                  # device-icons: 13, 14
                  ############################################
                  # OUTLINES
                  - type: image
                    entity: input_text.floorplan_select_state
                    state_image:
                      "bath": "/local/floorplan/outline-bath.png"
                      "bedroom": "/local/floorplan/outline-bedroom.png"
                      "commons": "/local/floorplan/outline-commons.png"
                      "entry": "/local/floorplan/outline-entry.png"
                      "guest": "/local/floorplan/outline-guest.png"
                      "kitchen": "/local/floorplan/outline-kitchen.png"
                      "living": "/local/floorplan/outline-living.png"
                      "office": "/local/floorplan/outline-office.png"
                      "storage": "/local/floorplan/outline-storage.png"
                      "toilet": "/local/floorplan/outline-toilet.png"
                      "veranda": "/local/floorplan/outline-veranda.png"
                      "none": "/local/floorplan/base-empty.png"
                    style:
                      left: 50%
                      top: 50%
                      width: 100%
                      z-index: 10
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                  # LIGHTS
                  - type: image
                    entity: sensor.dim_pendant_bedroom
                    image: "/local/floorplan/bedroom-v2.png"
                    style:
                      left: 50%
                      top: 50%
                      width: 100%
                      z-index: 2
                    state_filter:
                      "0": opacity(0%)
                      "5": opacity(20%)
                      "10": opacity(28%)
                      "15": opacity(36%)
                      "20": opacity(44%)
                      "25": opacity(52%)
                      "30": opacity(60%)
                      "40": opacity(68%)
                      "50": opacity(75%)
                      "60": opacity(80%)
                      "70": opacity(85%)
                      "80": opacity(90%)
                      "90": opacity(95%)
                      "100": opacity(100%)
                  - type: image
                    entity: sensor.dim_pendants_office
                    image: "/local/floorplan/office-v2.png"
                    style:
                      left: 50%
                      top: 50%
                      width: 100%
                      z-index: 2
                    state_filter:
                      "0": opacity(0%)
                      "5": opacity(20%)
                      "10": opacity(28%)
                      "15": opacity(36%)
                      "20": opacity(44%)
                      "25": opacity(52%)
                      "30": opacity(60%)
                      "40": opacity(68%)
                      "50": opacity(75%)
                      "60": opacity(80%)
                      "70": opacity(85%)
                      "80": opacity(90%)
                      "90": opacity(95%)
                      "100": opacity(100%)
                  - type: image
                    entity: sensor.dim_pendant_guest
                    image: "/local/floorplan/guest-v2.png"
                    style:
                      left: 50%
                      top: 50%
                      width: 100%
                      z-index: 2
                    state_filter:
                      "0": opacity(0%)
                      "5": opacity(20%)
                      "10": opacity(28%)
                      "15": opacity(36%)
                      "20": opacity(44%)
                      "25": opacity(52%)
                      "30": opacity(60%)
                      "40": opacity(68%)
                      "50": opacity(75%)
                      "60": opacity(80%)
                      "70": opacity(85%)
                      "80": opacity(90%)
                      "90": opacity(95%)
                      "100": opacity(100%)
                  - type: image
                    entity: sensor.dim_downlight_toilet
                    image: "/local/floorplan/toilet-v2.png"
                    style:
                      left: 50%
                      top: 50%
                      width: 100%
                      z-index: 2
                    state_filter:
                      "0": opacity(0%)
                      "5": opacity(20%)
                      "10": opacity(28%)
                      "15": opacity(36%)
                      "20": opacity(44%)
                      "25": opacity(52%)
                      "30": opacity(60%)
                      "40": opacity(68%)
                      "50": opacity(75%)
                      "60": opacity(80%)
                      "70": opacity(85%)
                      "80": opacity(90%)
                      "90": opacity(95%)
                      "100": opacity(100%)
                  - type: image
                    entity: sensor.dim_downlights_bath
                    image: "/local/floorplan/bath-downlights-v2.png"
                    style:
                      left: 50%
                      top: 50%
                      width: 100%
                      z-index: 3
                      mix-blend-mode: lighten
                    state_filter:
                      "0": opacity(0%)
                      "5": opacity(20%)
                      "10": opacity(28%)
                      "15": opacity(36%)
                      "20": opacity(44%)
                      "25": opacity(52%)
                      "30": opacity(60%)
                      "40": opacity(68%)
                      "50": opacity(75%)
                      "60": opacity(80%)
                      "70": opacity(85%)
                      "80": opacity(90%)
                      "90": opacity(95%)
                      "100": opacity(100%)
                  - type: image
                    entity: sensor.dim_lightstrip_bath
                    image: "/local/floorplan/bath-lightstrip-v2.png"
                    style:
                      left: 50%
                      top: 50%
                      width: 100%
                      z-index: 2
                    state_filter:
                      "0": opacity(0%)
                      "5": opacity(20%)
                      "10": opacity(28%)
                      "15": opacity(36%)
                      "20": opacity(44%)
                      "25": opacity(52%)
                      "30": opacity(60%)
                      "40": opacity(68%)
                      "50": opacity(75%)
                      "60": opacity(80%)
                      "70": opacity(85%)
                      "80": opacity(90%)
                      "90": opacity(95%)
                      "100": opacity(100%)
                  - type: image
                    entity: sensor.dim_downlights_entry
                    image: "/local/floorplan/common-entry-v2.png"
                    style:
                      left: 50%
                      top: 50%
                      width: 100%
                      z-index: 2
                    state_filter:
                      "0": opacity(0%)
                      "5": opacity(20%)
                      "10": opacity(28%)
                      "15": opacity(36%)
                      "20": opacity(44%)
                      "25": opacity(52%)
                      "30": opacity(60%)
                      "40": opacity(68%)
                      "50": opacity(75%)
                      "60": opacity(80%)
                      "70": opacity(85%)
                      "80": opacity(90%)
                      "90": opacity(95%)
                      "100": opacity(100%)
                  - type: image
                    entity: sensor.dim_spottrack_living
                    image: "/local/floorplan/common-4track-v2.png"
                    style:
                      left: 50%
                      top: 50%
                      width: 100%
                      z-index: 3
                      mix-blend-mode: lighten
                    state_filter:
                      "0": opacity(0%)
                      "5": opacity(20%)
                      "10": opacity(28%)
                      "15": opacity(36%)
                      "20": opacity(44%)
                      "25": opacity(52%)
                      "30": opacity(60%)
                      "40": opacity(68%)
                      "50": opacity(75%)
                      "60": opacity(80%)
                      "70": opacity(85%)
                      "80": opacity(90%)
                      "90": opacity(95%)
                      "100": opacity(100%)
                  - type: image
                    entity: sensor.dim_downlights_living
                    image: "/local/floorplan/common-downlights-v2.png"
                    style:
                      left: 50%
                      top: 50%
                      width: 100%
                      z-index: 4
                      mix-blend-mode: lighten
                    state_filter:
                      "0": opacity(0%)
                      "5": opacity(20%)
                      "10": opacity(28%)
                      "15": opacity(36%)
                      "20": opacity(44%)
                      "25": opacity(52%)
                      "30": opacity(60%)
                      "40": opacity(68%)
                      "50": opacity(75%)
                      "60": opacity(80%)
                      "70": opacity(85%)
                      "80": opacity(90%)
                      "90": opacity(95%)
                      "100": opacity(100%)
                  - type: image
                    entity: sensor.dim_pendants_dining
                    image: "/local/floorplan/common-dining-v2.png"
                    style:
                      left: 50%
                      top: 50%
                      width: 100%
                      z-index: 5
                      mix-blend-mode: lighten
                    state_filter:
                      "0": opacity(0%)
                      "5": opacity(20%)
                      "10": opacity(28%)
                      "15": opacity(36%)
                      "20": opacity(44%)
                      "25": opacity(52%)
                      "30": opacity(60%)
                      "40": opacity(68%)
                      "50": opacity(75%)
                      "60": opacity(80%)
                      "70": opacity(85%)
                      "80": opacity(90%)
                      "90": opacity(95%)
                      "100": opacity(100%)
                  - type: image
                    entity: sensor.dim_pendants_kitchen
                    image: "/local/floorplan/common-flowerpots-v2.png"
                    style:
                      left: 50%
                      top: 50%
                      width: 100%
                      z-index: 6
                      mix-blend-mode: lighten
                    state_filter:
                      "0": opacity(0%)
                      "5": opacity(20%)
                      "10": opacity(28%)
                      "15": opacity(36%)
                      "20": opacity(44%)
                      "25": opacity(52%)
                      "30": opacity(60%)
                      "40": opacity(68%)
                      "50": opacity(75%)
                      "60": opacity(80%)
                      "70": opacity(85%)
                      "80": opacity(90%)
                      "90": opacity(95%)
                      "100": opacity(100%)
                  - type: image
                    entity: sensor.dim_spottrack_kitchen
                    image: "/local/floorplan/common-6track-v2.png"
                    style:
                      left: 50%
                      top: 50%
                      width: 100%
                      z-index: 7
                      mix-blend-mode: lighten
                    state_filter:
                      "0": opacity(0%)
                      "5": opacity(20%)
                      "10": opacity(28%)
                      "15": opacity(36%)
                      "20": opacity(44%)
                      "25": opacity(52%)
                      "30": opacity(60%)
                      "40": opacity(68%)
                      "50": opacity(75%)
                      "60": opacity(80%)
                      "70": opacity(85%)
                      "80": opacity(90%)
                      "90": opacity(95%)
                      "100": opacity(100%)

                      #mix-blend-mode: lighten # Test: hard-light, soft-light, luminosity
                      #opacity: "{{ states('input_number.apartment_dimmer') | int / 100}}"